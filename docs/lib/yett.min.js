!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.yett={})}(this,function(t){"use strict";var e=window.TYPE_SANDBOX?window.TYPE_SANDBOX:"",r={blacklist:window.YETT_BLACKLIST,whitelist:window.YETT_WHITELIST},n={blacklisted:[]},i={blacklisted:[]},c=function(t,e){return t&&(!e||"javascript/blocked"!==e)&&(!r.blacklist||r.blacklist.some(function(e){return e.test(t)}))&&(!r.whitelist||r.whitelist.every(function(e){return!e.test(t)}))},o=function(t){var e=t.getAttribute("src");return r.blacklist&&r.blacklist.every(function(t){return!t.test(e)})||r.whitelist&&r.whitelist.some(function(t){return t.test(e)})},s=new MutationObserver(function(t){t.forEach(function(t){for(var r=t.addedNodes,o=function(t){var o=r[t];if(1===o.nodeType&&"SCRIPT"===o.tagName){var s=o.src,l=o.type;if(c(s,l)){n.blacklisted.push(o.cloneNode()),o.type="javascript/blocked";o.addEventListener("beforescriptexecute",function t(e){"javascript/blocked"===o.getAttribute("type")&&e.preventDefault(),o.removeEventListener("beforescriptexecute",t)}),o.parentElement.removeChild(o)}}if(1===o.nodeType&&"IFRAME"===o.tagName){var a=o.src;c(a)&&(i.blacklisted.push(o.cloneNode()),o.sandbox=e)}},s=0;s<r.length;s++)o(s)})});s.observe(document.documentElement,{childList:!0,subtree:!0});var l={src:Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype,"src"),type:Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype,"type")},a=document.createElement;document.createElement=function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if("iframe"===r[0].toLowerCase()){var i=a.bind(document).apply(void 0,r);return Object.defineProperties(i,{src:{get:function(){return l.src.get.call(this)},set:function(t){return c(t,i.type)&&(i.sandbox=e),l.src.set.call(this,t)}},sandbox:{set:function(t){return l.type.set.call(this,c(i.src)?e:t)}}}),i.setAttribute=function(t,e){"sandbox"===t||"src"===t?i[t]=e:HTMLScriptElement.prototype.setAttribute.call(i,t,e)},i}if("script"!==r[0].toLowerCase())return a.bind(document).apply(void 0,r);var o=a.bind(document).apply(void 0,r);return Object.defineProperties(o,{src:{get:function(){return l.src.get.call(this)},set:function(t){return c(t,o.type)&&(o.type="javascript/blocked"),l.src.set.call(this,t)}},type:{set:function(t){return l.type.set.call(this,c(o.src,o.type)?"javascript/blocked":t)}}}),o.setAttribute=function(t,e){"type"===t||"src"===t?o[t]=e:HTMLScriptElement.prototype.setAttribute.call(o,t,e)},o};var u=function(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)},p=new RegExp("[|\\{}()[\\]^$+*?.]","g");t.unblock=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];e.length<1?(r.blacklist=[],r.whitelist=[]):(r.blacklist&&(r.blacklist=r.blacklist.filter(function(t){return e.every(function(e){return!t.test(e)})})),r.whitelist&&(r.whitelist=[].concat(u(r.whitelist),u(e.map(function(t){var e=".*"+t.replace(p,"\\$&")+".*";return r.whitelist.find(function(t){return t.toString()===e.toString()})?null:new RegExp(e)}).filter(Boolean)))));for(var c=document.querySelectorAll('script[type="javascript/blocked"]'),l=0;l<c.length;l++){var a=c[l];o(a)&&(a.type="application/javascript",n.blacklisted.push(a),a.parentElement.removeChild(a))}var d=0;[].concat(u(n.blacklisted)).forEach(function(t,e){if(o(t)){var r=document.createElement("script");r.setAttribute("src",t.src),r.setAttribute("type","application/javascript"),document.head.appendChild(r),n.blacklisted.splice(e-d,1),d++}}),r.blacklist&&r.blacklist.length<1&&s.disconnect()},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=yett.min.js.map
